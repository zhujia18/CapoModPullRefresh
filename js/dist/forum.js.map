{"version":3,"sources":["webpack://@capomod/pullrefresh/webpack/bootstrap","webpack://@capomod/pullrefresh/external \"flarum.core.compat['forum/app']\"","webpack://@capomod/pullrefresh/./node_modules/pulltorefreshjs/dist/index.umd.js","webpack://@capomod/pullrefresh/./src/forum/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","flarum","core","compat","_shared","pullStartY","pullMoveY","handlers","styleEl","events","dist","state","timeout","distResisted","supportsPassive","supportsPointerEvents","window","PointerEvent","addEventListener","e","_timeout","_ptr","setupDOM","handler","ptrElement","ptr","document","createElement","mainElement","body","parentNode","insertBefore","firstChild","classList","add","classPrefix","innerHTML","getMarkup","replace","onInit","setAttribute","head","appendChild","textContent","getStyles","onReset","remove","style","cssProp","setTimeout","removeChild","refreshTimeout","update","iconEl","querySelector","textEl","iconRefreshing","iconArrow","instructionsReleaseToRefresh","instructionsPullToRefresh","instructionsRefreshing","screenY","event","pointerEventsEnabled","touches","_setupEvents","_el","_onTouchStart","target","filter","h","contains","enable","shouldPullToRefresh","clearTimeout","_onTouchMove","distExtra","distIgnore","cancelable","preventDefault","resistanceFunction","distThreshold","Math","min","distMax","_onTouchEnd","distReload","retval","onRefresh","then","length","_onScroll","toggle","_passiveSettings","passive","undefined","onTouchEnd","onTouchStart","onTouchMove","onScroll","destroy","removeEventListener","_defaults","triggerElement","location","reload","scrollY","_methods","_setupHandler","options","_handler","keys","forEach","method","offset","indexOf","splice","setPassiveMode","isPassive","setPointerEventsMode","isEnabled","destroyAll","init","push","_","setupHandler","setupEvents","factory","app","initializers","PullToRefresh"],"mappings":"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","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","module.exports = flarum.core.compat['forum/app'];","/*!\n * pulltorefreshjs v0.1.22\n * (c) Rafael Soto\n * Released under the MIT License.\n */\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = global || self, global.PullToRefresh = factory());\n}(this, function () { 'use strict';\n\n  var _shared = {\n    pullStartY: null,\n    pullMoveY: null,\n    handlers: [],\n    styleEl: null,\n    events: null,\n    dist: 0,\n    state: 'pending',\n    timeout: null,\n    distResisted: 0,\n    supportsPassive: false,\n    supportsPointerEvents: typeof window !== 'undefined' && !!window.PointerEvent\n  };\n\n  try {\n    window.addEventListener('test', null, {\n      get passive() {\n        // eslint-disable-line getter-return\n        _shared.supportsPassive = true;\n      }\n\n    });\n  } catch (e) {// do nothing\n  }\n\n  function setupDOM(handler) {\n    if (!handler.ptrElement) {\n      var ptr = document.createElement('div');\n\n      if (handler.mainElement !== document.body) {\n        handler.mainElement.parentNode.insertBefore(ptr, handler.mainElement);\n      } else {\n        document.body.insertBefore(ptr, document.body.firstChild);\n      }\n\n      ptr.classList.add(((handler.classPrefix) + \"ptr\"));\n      ptr.innerHTML = handler.getMarkup().replace(/__PREFIX__/g, handler.classPrefix);\n      handler.ptrElement = ptr;\n\n      if (typeof handler.onInit === 'function') {\n        handler.onInit(handler);\n      } // Add the css styles to the style node, and then\n      // insert it into the dom\n\n\n      if (!_shared.styleEl) {\n        _shared.styleEl = document.createElement('style');\n\n        _shared.styleEl.setAttribute('id', 'pull-to-refresh-js-style');\n\n        document.head.appendChild(_shared.styleEl);\n      }\n\n      _shared.styleEl.textContent = handler.getStyles().replace(/__PREFIX__/g, handler.classPrefix).replace(/\\s+/g, ' ');\n    }\n\n    return handler;\n  }\n\n  function onReset(handler) {\n    if (!handler.ptrElement) { return; }\n    handler.ptrElement.classList.remove(((handler.classPrefix) + \"refresh\"));\n    handler.ptrElement.style[handler.cssProp] = '0px';\n    setTimeout(function () {\n      // remove previous ptr-element from DOM\n      if (handler.ptrElement && handler.ptrElement.parentNode) {\n        handler.ptrElement.parentNode.removeChild(handler.ptrElement);\n        handler.ptrElement = null;\n      } // reset state\n\n\n      _shared.state = 'pending';\n    }, handler.refreshTimeout);\n  }\n\n  function update(handler) {\n    var iconEl = handler.ptrElement.querySelector((\".\" + (handler.classPrefix) + \"icon\"));\n    var textEl = handler.ptrElement.querySelector((\".\" + (handler.classPrefix) + \"text\"));\n\n    if (iconEl) {\n      if (_shared.state === 'refreshing') {\n        iconEl.innerHTML = handler.iconRefreshing;\n      } else {\n        iconEl.innerHTML = handler.iconArrow;\n      }\n    }\n\n    if (textEl) {\n      if (_shared.state === 'releasing') {\n        textEl.innerHTML = handler.instructionsReleaseToRefresh;\n      }\n\n      if (_shared.state === 'pulling' || _shared.state === 'pending') {\n        textEl.innerHTML = handler.instructionsPullToRefresh;\n      }\n\n      if (_shared.state === 'refreshing') {\n        textEl.innerHTML = handler.instructionsRefreshing;\n      }\n    }\n  }\n\n  var _ptr = {\n    setupDOM: setupDOM,\n    onReset: onReset,\n    update: update\n  };\n\n  var _timeout;\n\n  var screenY = function screenY(event) {\n    if (_shared.pointerEventsEnabled && _shared.supportsPointerEvents) {\n      return event.screenY;\n    }\n\n    return event.touches[0].screenY;\n  };\n\n  var _setupEvents = (function () {\n    var _el;\n\n    function _onTouchStart(e) {\n      // here, we must pick a handler first, and then append their html/css on the DOM\n      var target = _shared.handlers.filter(function (h) { return h.contains(e.target); })[0];\n\n      _shared.enable = !!target;\n\n      if (target && _shared.state === 'pending') {\n        _el = _ptr.setupDOM(target);\n\n        if (target.shouldPullToRefresh()) {\n          _shared.pullStartY = screenY(e);\n        }\n\n        clearTimeout(_shared.timeout);\n\n        _ptr.update(target);\n      }\n    }\n\n    function _onTouchMove(e) {\n      if (!(_el && _el.ptrElement && _shared.enable)) {\n        return;\n      }\n\n      if (!_shared.pullStartY) {\n        if (_el.shouldPullToRefresh()) {\n          _shared.pullStartY = screenY(e);\n        }\n      } else {\n        _shared.pullMoveY = screenY(e);\n      }\n\n      if (_shared.state === 'refreshing') {\n        if (e.cancelable && _el.shouldPullToRefresh() && _shared.pullStartY < _shared.pullMoveY) {\n          e.preventDefault();\n        }\n\n        return;\n      }\n\n      if (_shared.state === 'pending') {\n        _el.ptrElement.classList.add(((_el.classPrefix) + \"pull\"));\n\n        _shared.state = 'pulling';\n\n        _ptr.update(_el);\n      }\n\n      if (_shared.pullStartY && _shared.pullMoveY) {\n        _shared.dist = _shared.pullMoveY - _shared.pullStartY;\n      }\n\n      _shared.distExtra = _shared.dist - _el.distIgnore;\n\n      if (_shared.distExtra > 0) {\n        if (e.cancelable) {\n          e.preventDefault();\n        }\n\n        _el.ptrElement.style[_el.cssProp] = (_shared.distResisted) + \"px\";\n        _shared.distResisted = _el.resistanceFunction(_shared.distExtra / _el.distThreshold) * Math.min(_el.distMax, _shared.distExtra);\n\n        if (_shared.state === 'pulling' && _shared.distResisted > _el.distThreshold) {\n          _el.ptrElement.classList.add(((_el.classPrefix) + \"release\"));\n\n          _shared.state = 'releasing';\n\n          _ptr.update(_el);\n        }\n\n        if (_shared.state === 'releasing' && _shared.distResisted < _el.distThreshold) {\n          _el.ptrElement.classList.remove(((_el.classPrefix) + \"release\"));\n\n          _shared.state = 'pulling';\n\n          _ptr.update(_el);\n        }\n      }\n    }\n\n    function _onTouchEnd() {\n      if (!(_el && _el.ptrElement && _shared.enable)) {\n        return;\n      } // wait 1/2 sec before unmounting...\n\n\n      clearTimeout(_timeout);\n      _timeout = setTimeout(function () {\n        if (_el && _el.ptrElement && _shared.state === 'pending') {\n          _ptr.onReset(_el);\n        }\n      }, 500);\n\n      if (_shared.state === 'releasing' && _shared.distResisted > _el.distThreshold) {\n        _shared.state = 'refreshing';\n        _el.ptrElement.style[_el.cssProp] = (_el.distReload) + \"px\";\n\n        _el.ptrElement.classList.add(((_el.classPrefix) + \"refresh\"));\n\n        _shared.timeout = setTimeout(function () {\n          var retval = _el.onRefresh(function () { return _ptr.onReset(_el); });\n\n          if (retval && typeof retval.then === 'function') {\n            retval.then(function () { return _ptr.onReset(_el); });\n          }\n\n          if (!retval && !_el.onRefresh.length) {\n            _ptr.onReset(_el);\n          }\n        }, _el.refreshTimeout);\n      } else {\n        if (_shared.state === 'refreshing') {\n          return;\n        }\n\n        _el.ptrElement.style[_el.cssProp] = '0px';\n        _shared.state = 'pending';\n      }\n\n      _ptr.update(_el);\n\n      _el.ptrElement.classList.remove(((_el.classPrefix) + \"release\"));\n\n      _el.ptrElement.classList.remove(((_el.classPrefix) + \"pull\"));\n\n      _shared.pullStartY = _shared.pullMoveY = null;\n      _shared.dist = _shared.distResisted = 0;\n    }\n\n    function _onScroll() {\n      if (_el) {\n        _el.mainElement.classList.toggle(((_el.classPrefix) + \"top\"), _el.shouldPullToRefresh());\n      }\n    }\n\n    var _passiveSettings = _shared.supportsPassive ? {\n      passive: _shared.passive || false\n    } : undefined;\n\n    if (_shared.pointerEventsEnabled && _shared.supportsPointerEvents) {\n      window.addEventListener('pointerup', _onTouchEnd);\n      window.addEventListener('pointerdown', _onTouchStart);\n      window.addEventListener('pointermove', _onTouchMove, _passiveSettings);\n    } else {\n      window.addEventListener('touchend', _onTouchEnd);\n      window.addEventListener('touchstart', _onTouchStart);\n      window.addEventListener('touchmove', _onTouchMove, _passiveSettings);\n    }\n\n    window.addEventListener('scroll', _onScroll);\n    return {\n      onTouchEnd: _onTouchEnd,\n      onTouchStart: _onTouchStart,\n      onTouchMove: _onTouchMove,\n      onScroll: _onScroll,\n\n      destroy: function destroy() {\n        if (_shared.pointerEventsEnabled && _shared.supportsPointerEvents) {\n          window.removeEventListener('pointerdown', _onTouchStart);\n          window.removeEventListener('pointerup', _onTouchEnd);\n          window.removeEventListener('pointermove', _onTouchMove, _passiveSettings);\n        } else {\n          window.removeEventListener('touchstart', _onTouchStart);\n          window.removeEventListener('touchend', _onTouchEnd);\n          window.removeEventListener('touchmove', _onTouchMove, _passiveSettings);\n        }\n\n        window.removeEventListener('scroll', _onScroll);\n      }\n\n    };\n  });\n\n  var _ptrMarkup = \"\\n<div class=\\\"__PREFIX__box\\\">\\n  <div class=\\\"__PREFIX__content\\\">\\n    <div class=\\\"__PREFIX__icon\\\"></div>\\n    <div class=\\\"__PREFIX__text\\\"></div>\\n  </div>\\n</div>\\n\";\n\n  var _ptrStyles = \"\\n.__PREFIX__ptr {\\n  box-shadow: inset 0 -3px 5px rgba(0, 0, 0, 0.12);\\n  pointer-events: none;\\n  font-size: 0.85em;\\n  font-weight: bold;\\n  top: 0;\\n  height: 0;\\n  transition: height 0.3s, min-height 0.3s;\\n  text-align: center;\\n  width: 100%;\\n  overflow: hidden;\\n  display: flex;\\n  align-items: flex-end;\\n  align-content: stretch;\\n}\\n\\n.__PREFIX__box {\\n  padding: 10px;\\n  flex-basis: 100%;\\n}\\n\\n.__PREFIX__pull {\\n  transition: none;\\n}\\n\\n.__PREFIX__text {\\n  margin-top: .33em;\\n  color: rgba(0, 0, 0, 0.3);\\n}\\n\\n.__PREFIX__icon {\\n  color: rgba(0, 0, 0, 0.3);\\n  transition: transform .3s;\\n}\\n\\n/*\\nWhen at the top of the page, disable vertical overscroll so passive touch\\nlisteners can take over.\\n*/\\n.__PREFIX__top {\\n  touch-action: pan-x pan-down pinch-zoom;\\n}\\n\\n.__PREFIX__release .__PREFIX__icon {\\n  transform: rotate(180deg);\\n}\\n\";\n\n  var _defaults = {\n    distThreshold: 60,\n    distMax: 80,\n    distReload: 50,\n    distIgnore: 0,\n    mainElement: 'body',\n    triggerElement: 'body',\n    ptrElement: '.ptr',\n    classPrefix: 'ptr--',\n    cssProp: 'min-height',\n    iconArrow: '&#8675;',\n    iconRefreshing: '&hellip;',\n    instructionsPullToRefresh: 'Pull down to refresh',\n    instructionsReleaseToRefresh: 'Release to refresh',\n    instructionsRefreshing: 'Refreshing',\n    refreshTimeout: 500,\n    getMarkup: function () { return _ptrMarkup; },\n    getStyles: function () { return _ptrStyles; },\n    onInit: function () {},\n    onRefresh: function () { return location.reload(); },\n    resistanceFunction: function (t) { return Math.min(1, t / 2.5); },\n    shouldPullToRefresh: function () { return !window.scrollY; }\n  };\n\n  var _methods = ['mainElement', 'ptrElement', 'triggerElement'];\n  var _setupHandler = (function (options) {\n    var _handler = {}; // merge options with defaults\n\n    Object.keys(_defaults).forEach(function (key) {\n      _handler[key] = options[key] || _defaults[key];\n    }); // normalize timeout value, even if it is zero\n\n    _handler.refreshTimeout = typeof options.refreshTimeout === 'number' ? options.refreshTimeout : _defaults.refreshTimeout; // normalize elements\n\n    _methods.forEach(function (method) {\n      if (typeof _handler[method] === 'string') {\n        _handler[method] = document.querySelector(_handler[method]);\n      }\n    }); // attach events lazily\n\n\n    if (!_shared.events) {\n      _shared.events = _setupEvents();\n    }\n\n    _handler.contains = function (target) {\n      return _handler.triggerElement.contains(target);\n    };\n\n    _handler.destroy = function () {\n      // stop pending any pending callbacks\n      clearTimeout(_shared.timeout); // remove handler from shared state\n\n      var offset = _shared.handlers.indexOf(_handler);\n\n      _shared.handlers.splice(offset, 1);\n    };\n\n    return _handler;\n  });\n\n  var index = {\n    setPassiveMode: function setPassiveMode(isPassive) {\n      _shared.passive = isPassive;\n    },\n\n    setPointerEventsMode: function setPointerEventsMode(isEnabled) {\n      _shared.pointerEventsEnabled = isEnabled;\n    },\n\n    destroyAll: function destroyAll() {\n      if (_shared.events) {\n        _shared.events.destroy();\n\n        _shared.events = null;\n      }\n\n      _shared.handlers.forEach(function (h) {\n        h.destroy();\n      });\n    },\n\n    init: function init(options) {\n      if ( options === void 0 ) options = {};\n\n      var handler = _setupHandler(options);\n\n      _shared.handlers.push(handler);\n\n      return handler;\n    },\n\n    // export utils for testing\n    _: {\n      setupHandler: _setupHandler,\n      setupEvents: _setupEvents,\n      setupDOM: _ptr.setupDOM,\n      onReset: _ptr.onReset,\n      update: _ptr.update\n    }\n  };\n\n  return index;\n\n}));\n","/*\n * This file is part of justoverclock/flarum-ext-keywords.\n *\n * Copyright (c) 2021 Marco Colia.\n * Special thanks to Askvortsov\n * https://flarum.it\n *\n * For the full copyright and license information, please view the LICENSE.md\n * file that was distributed with this source code.\n */\n\nimport app from 'flarum/forum/app';\nimport PullToRefresh from 'pulltorefreshjs';\n\napp.initializers.add('capomod/pullrefresh', () => {\n  PullToRefresh.init({\n    mainElement: 'body',\n    triggerElement: 'body',\n    onRefresh() {\n      window.location.reload();\n    },\n    instructionsPullToRefresh: '<span style=\"color: var(--control-color);font-size: 13px;\">下拉将要刷新</span>',\n    instructionsReleaseToRefresh: '<span style=\"color: var(--control-color);font-size: 13px;\">松开将会刷新</span>',\n    instructionsRefreshing: '<span style=\"color: var(--control-color);font-size: 13px;\">正在刷新</span>',\n    iconArrow: '<i class=\"fa-solid fa-arrow-up\" style=\"color: var(--control-color);font-size: 13px;\"></i>',\n    iconRefreshing: '<i class=\"fa-solid fa-spinner\" style=\"color: var(--control-color);font-size: 13px;\"></i>',\n    distThreshold: 85,\n    distMax: 100,\n    distReload: 100,\n    distIgnore: 0,\n  });\n});\n"],"sourceRoot":""}